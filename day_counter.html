<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day Counter | RevOps Tools</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Helvetica Neue"', 'Helvetica', 'Arial', 'sans-serif'],
                        mono: ['ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', "Liberation Mono", "Courier New", 'monospace'],
                    },
                    colors: {
                        brand: {
                            base: '#F5F2EB',       /* Main Background */
                            surface: '#EBE6DD',    /* Secondary/Hover */
                            line: '#D4CDC1',       /* Borders/Grid Lines */
                            text: '#3A352F',       /* Primary Text */
                            muted: '#8C857B',      /* Secondary Text */
                            accent: '#A4907C',     /* Accents */
                            forest: '#1F3A2C',     /* Dark Interactive Green */
                            forestTint: '#E6EAE6', /* Light Green Tint */
                        },
                        // Functional Status Colors
                        rust: { DEFAULT: '#C86A58', tint: '#F7EAE8' },
                        brass: '#C29A5B',
                        slate: { DEFAULT: '#5B7B8C', tint: '#EAF0F2' },
                        forest: { 500: '#4A6B56', 700: '#2C4F3B' } 
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #F5F2EB;
            color: #3A352F;
            /* Subtle organic noise texture */
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.04'/%3E%3C/svg%3E");
            -webkit-font-smoothing: antialiased;
        }

        /* Hard shadow for main container (Industrial Look) */
        .industrial-shadow {
            box-shadow: 8px 8px 0px 0px rgba(58,53,47,0.05);
        }

        /* Premium Reveal Animations */
        .reveal-up {
            opacity: 0;
            animation: revealUp 1.2s cubic-bezier(0.16, 1, 0.3, 1) forwards;
            transform: translateY(40px);
        }
        
        @keyframes revealUp {
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Remove default input styling */
        input:focus, select:focus, textarea:focus { outline: none; box-shadow: none; }
        
        /* Toast Notification Animations */
        .toast-enter { animation: slideInTop 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
        .toast-exit { animation: fadeOutTop 0.3s ease-in forwards; }
        @keyframes slideInTop { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes fadeOutTop { to { transform: translateY(-50px); opacity: 0; } }
    </style>
</head>
<body class="min-h-screen flex flex-col p-6 md:p-10 lg:p-16 pt-8 md:pt-10 relative selection:bg-brand-forest selection:text-brand-base">

    <!-- Header Navigation -->
    <div class="w-full max-w-4xl mx-auto mb-8 md:mb-12 flex justify-between items-end reveal-up delay-100">
        <div>
            <a href="index.html" class="inline-flex items-center gap-2 font-mono text-[10px] tracking-[0.2em] text-brand-muted hover:text-brand-forest transition-colors uppercase mb-4 group">
                <i data-lucide="arrow-left" width="12" height="12" class="group-hover:-translate-x-1 transition-transform"></i>
                Return
            </a>
            <h1 class="text-3xl md:text-4xl font-medium tracking-tight text-brand-text">Day Counter</h1>
            <p class="font-mono text-[10px] tracking-[0.2em] text-brand-muted uppercase mt-2">Duration & Date Calculator</p>
        </div>
        
        <!-- Status Indicator -->
        <div class="flex items-center gap-3 mb-1">
            <span id="status-dot" class="w-2 h-2 rounded-full bg-brass animate-pulse"></span>
            <span id="status-text" class="font-mono text-[10px] tracking-widest text-brand-muted uppercase">Ready</span>
            <button id="info-btn" class="ml-2 text-brand-muted hover:text-brand-forest transition-colors">
                <i data-lucide="info" width="18" height="18"></i>
            </button>
        </div>
    </div>

    <!-- Main Content Grid -->
    <main class="w-full max-w-4xl mx-auto reveal-up delay-200 flex-grow flex flex-col">
        
        <!-- 1px Hairline Grid Wrapper -->
        <div class="bg-brand-line border border-brand-line industrial-shadow flex flex-col gap-px relative">

            <!-- Input Section -->
            <section class="bg-brand-base p-8 md:p-10">
                <div class="flex justify-between items-end mb-8">
                    <h2 class="font-mono text-[10px] tracking-[0.2em] text-brand-muted uppercase flex items-center gap-2">
                        <i data-lucide="calendar-clock" width="14" height="14" class="text-brand-text"></i>
                        01. Timeframe Configuration
                    </h2>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12">
                    <!-- Start Date -->
                    <div>
                        <label class="block font-mono text-[10px] tracking-[0.15em] text-brand-muted uppercase mb-2">Start Date</label>
                        <div class="flex items-center border-b border-brand-line focus-within:border-brand-forest transition-colors py-1 group">
                            <input type="date" id="start-date" 
                                class="w-full bg-transparent text-brand-text text-xl md:text-2xl font-medium outline-none font-mono placeholder-brand-muted/50 uppercase">
                        </div>
                    </div>

                    <!-- End Date -->
                    <div>
                        <label class="block font-mono text-[10px] tracking-[0.15em] text-brand-muted uppercase mb-2">End Date</label>
                        <div class="flex items-center border-b border-brand-line focus-within:border-brand-forest transition-colors py-1 group">
                            <input type="date" id="end-date" 
                                class="w-full bg-transparent text-brand-text text-xl md:text-2xl font-medium outline-none font-mono placeholder-brand-muted/50 uppercase">
                        </div>
                    </div>
                </div>

                <div class="mt-8 flex flex-col md:flex-row justify-between items-start md:items-end gap-6">
                    <!-- Inclusion Logic Toggle -->
                    <div>
                        <label class="block font-mono text-[10px] tracking-[0.15em] text-brand-muted uppercase mb-3">End Date Logic</label>
                        <div class="flex font-mono text-[10px] tracking-[0.15em] uppercase border border-brand-line bg-brand-surface inline-flex cursor-pointer">
                            <button id="logic-exclude" class="px-4 py-2 bg-brand-base text-brand-text transition-colors border-r border-brand-line">
                                Exclude End
                            </button>
                            <button id="logic-include" class="px-4 py-2 text-brand-muted hover:text-brand-text hover:bg-white/50 transition-colors">
                                Include End (+1)
                            </button>
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="flex gap-4 w-full md:w-auto">
                        <button id="reset-btn" class="font-mono text-[10px] tracking-[0.2em] text-rust hover:bg-rust-tint transition-colors px-4 py-3 uppercase border border-transparent">
                            Reset
                        </button>
                        <button id="calculate-btn" class="flex-1 md:flex-none font-mono text-[10px] tracking-[0.2em] text-brand-base bg-brand-forest hover:bg-forest-700 transition-colors px-8 py-3 uppercase flex items-center justify-center gap-2">
                            <i data-lucide="calculator" width="12" height="12"></i> Calculate
                        </button>
                    </div>
                </div>
            </section>

            <!-- Results Section (Hidden by default) -->
            <section id="results-container" class="bg-brand-surface p-8 md:p-10 hidden fade-in border-t border-brand-line">
                <h2 class="font-mono text-[10px] tracking-[0.2em] text-brand-muted uppercase flex items-center gap-2 mb-8">
                    <i data-lucide="bar-chart-3" width="14" height="14" class="text-brand-text"></i>
                    02. Calculated Duration
                </h2>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-px bg-brand-line border border-brand-line mb-8">
                    <!-- Total Days -->
                    <div class="bg-brand-base p-6 flex flex-col justify-between h-32 md:h-40">
                        <span class="font-mono text-[10px] tracking-[0.15em] text-brand-muted uppercase">Total Calendar Days</span>
                        <div class="flex items-baseline gap-2">
                            <span id="res-total-days" class="text-4xl md:text-5xl font-medium text-brand-text tracking-tight">0</span>
                            <span class="font-mono text-xs text-brand-muted uppercase">Days</span>
                        </div>
                    </div>
                    
                    <!-- Term in Years -->
                    <div class="bg-brand-base p-6 flex flex-col justify-between h-32 md:h-40">
                        <span class="font-mono text-[10px] tracking-[0.15em] text-brand-muted uppercase">Term in Years</span>
                        <div class="flex items-baseline gap-2">
                            <span id="res-term-years" class="text-4xl md:text-5xl font-medium text-brand-accent tracking-tight">0.0000</span>
                            <span class="font-mono text-xs text-brand-muted uppercase">Years</span>
                        </div>
                    </div>
                </div>

                <!-- Detailed Breakdown -->
                <div class="border-t border-brand-line pt-6">
                    <div class="grid grid-cols-3 gap-4 mb-4">
                        <div class="text-center md:text-left">
                            <span class="block text-2xl font-medium text-brand-text mb-1" id="res-years">0</span>
                            <span class="font-mono text-[10px] tracking-widest text-brand-muted uppercase">Years</span>
                        </div>
                        <div class="text-center md:text-left border-l border-brand-line pl-4 md:pl-0 md:border-l-0">
                            <span class="block text-2xl font-medium text-brand-text mb-1" id="res-months">0</span>
                            <span class="font-mono text-[10px] tracking-widest text-brand-muted uppercase">Months</span>
                        </div>
                        <div class="text-center md:text-left border-l border-brand-line pl-4 md:pl-0 md:border-l-0">
                            <span class="block text-2xl font-medium text-brand-text mb-1" id="res-days">0</span>
                            <span class="font-mono text-[10px] tracking-widest text-brand-muted uppercase">Days</span>
                        </div>
                    </div>
                    
                    <div class="bg-brand-base border border-brand-line p-3 text-center md:text-left">
                        <span class="font-mono text-[10px] tracking-widest text-brand-muted uppercase mr-2">Readable Format:</span>
                        <span id="res-readable" class="text-sm font-medium text-brand-text">0 days</span>
                    </div>
                </div>
            </section>

            <!-- Empty State -->
            <div id="empty-state" class="bg-brand-surface p-12 flex flex-col items-center justify-center text-brand-muted border-t border-brand-line">
                <i data-lucide="calendar" width="32" height="32" class="mb-4 opacity-50"></i>
                <p class="font-mono text-[10px] tracking-widest uppercase">Awaiting Dates</p>
            </div>

        </div>
    </main>

    <!-- Footer -->
    <footer class="max-w-4xl mx-auto px-4 md:px-8 mt-12 text-center reveal-up delay-300">
        <span class="font-mono text-[10px] tracking-[0.2em] text-brand-muted uppercase">
            Designed & Developed by <span class="text-brand-text font-medium">Jose Torres</span>
        </span>
    </footer>

    <!-- Documentation Info Modal -->
    <div id="info-modal" class="fixed inset-0 z-50 hidden flex items-center justify-center p-4">
        <div id="info-backdrop" class="absolute inset-0 bg-brand-text/10 backdrop-blur-sm transition-opacity"></div>
        <div class="relative bg-brand-base border border-brand-line w-full max-w-lg fade-in z-50 industrial-shadow">
            
            <div class="px-6 py-4 border-b border-brand-line flex justify-between items-center bg-brand-surface">
                <h3 class="font-mono text-[10px] tracking-[0.2em] text-brand-text uppercase flex items-center gap-2">
                    <i data-lucide="file-text" width="14" height="14"></i>
                    Documentation
                </h3>
                <button id="close-info-btn" class="text-brand-muted hover:text-brand-text transition-colors">
                    <i data-lucide="x" width="16" height="16"></i>
                </button>
            </div>

            <div class="p-8 space-y-6 text-sm text-brand-text leading-relaxed">
                <div>
                    <h4 class="font-medium mb-2">System Objective</h4>
                    <p class="text-brand-muted">Accurate day counting is essential for SLA tracking, contract term validation, and proration logic. This tool standardizes calculation methods to prevent "off-by-one" errors common in ad-hoc spreadsheet math.</p>
                </div>

                <div class="border-t border-brand-line pt-6">
                    <h4 class="font-medium mb-2">Finance Logic</h4>
                    <p class="text-brand-muted">The calculation uses strict start-of-day timestamps (00:00:00) to ensure whole-day integers, independent of timezones or seconds.</p>
                    <div class="bg-brand-surface p-4 mt-3 border border-brand-line font-mono text-[10px] tracking-wide text-center text-brand-text uppercase mb-4">
                        Total Days = (End Date - Start Date)
                    </div>
                    
                    <h4 class="font-medium mb-2">Term in Years</h4>
                    <p class="text-brand-muted">Calculates the precise decimal year value based on a standard 365-day year basis (Actual/365).</p>
                    <div class="bg-brand-surface p-4 mt-3 border border-brand-line font-mono text-[10px] tracking-wide text-center text-brand-text uppercase">
                        Total Days / 365.0000
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification Container -->
    <div id="notification-container" class="fixed top-6 right-6 z-50 flex flex-col gap-3 pointer-events-none"></div>

    <script>
        lucide.createIcons();

        // Elements
        const startDateInput = document.getElementById('start-date');
        const endDateInput = document.getElementById('end-date');
        const calculateBtn = document.getElementById('calculate-btn');
        const resetBtn = document.getElementById('reset-btn');
        const resultsContainer = document.getElementById('results-container');
        const emptyState = document.getElementById('empty-state');
        
        // Mode Buttons
        const btnExclude = document.getElementById('logic-exclude');
        const btnInclude = document.getElementById('logic-include');
        let includeEndDate = false;

        // --- Core Logic ---

        function toggleInclude(active) {
            includeEndDate = active;
            if (active) {
                btnInclude.className = 'px-4 py-2 bg-brand-base text-brand-text transition-colors border-l border-brand-line';
                btnExclude.className = 'px-4 py-2 text-brand-muted hover:text-brand-text hover:bg-white/50 transition-colors border-r border-brand-line';
            } else {
                btnExclude.className = 'px-4 py-2 bg-brand-base text-brand-text transition-colors border-r border-brand-line';
                btnInclude.className = 'px-4 py-2 text-brand-muted hover:text-brand-text hover:bg-white/50 transition-colors border-l border-brand-line';
            }
            // Auto-recalculate if inputs exist
            if (startDateInput.value && endDateInput.value) calculateDuration();
        }

        function calculateDuration() {
            const startVal = startDateInput.value;
            const endVal = endDateInput.value;

            if (!startVal || !endVal) {
                showNotification('Missing Input', 'Please select both a start and end date.', 'error');
                return;
            }

            // Standardize on 00:00:00 to ignore time/seconds completely
            const startDate = new Date(startVal + 'T00:00:00'); 
            const endDate = new Date(endVal + 'T00:00:00');

            if (endDate < startDate) {
                showNotification('Invalid Range', 'End date cannot be before start date.', 'error');
                return;
            }

            // --- 1. Total Days Calculation (Finance Logic: Stripping Time) ---
            const oneDayMs = 24 * 60 * 60 * 1000;
            // Calculate absolute diff in milliseconds
            let diffMs = endDate.getTime() - startDate.getTime();
            // Convert to days
            let totalDays = Math.round(diffMs / oneDayMs);
            
            if (includeEndDate) totalDays += 1;

            // --- 2. Years / Months / Days Breakdown ---
            // Use fresh date objects to prevent mutation side effects
            let d1 = new Date(startDate.getTime());
            let d2 = new Date(endDate.getTime());
            if (includeEndDate) d2.setDate(d2.getDate() + 1);

            let years = d2.getFullYear() - d1.getFullYear();
            let months = d2.getMonth() - d1.getMonth();
            let days = d2.getDate() - d1.getDate();

            if (days < 0) {
                months--;
                // Get days in previous month
                const prevMonth = new Date(d2.getFullYear(), d2.getMonth(), 0);
                days += prevMonth.getDate();
            }
            if (months < 0) {
                years--;
                months += 12;
            }

            // --- 3. Term in Years Calculation (Actual/365) ---
            const termYears = totalDays / 365;

            // --- Update UI ---
            document.getElementById('res-total-days').textContent = totalDays.toLocaleString();
            document.getElementById('res-term-years').textContent = termYears.toFixed(4); // Display with 4 decimal places
            document.getElementById('res-years').textContent = years;
            document.getElementById('res-months').textContent = months;
            document.getElementById('res-days').textContent = days;

            // Readable String
            const parts = [];
            if (years > 0) parts.push(`${years} ${years === 1 ? 'year' : 'years'}`);
            if (months > 0) parts.push(`${months} ${months === 1 ? 'month' : 'months'}`);
            if (days > 0) parts.push(`${days} ${days === 1 ? 'day' : 'days'}`);
            if (parts.length === 0) parts.push('0 days');
            
            document.getElementById('res-readable').textContent = parts.join(', ');

            // Status Update
            document.getElementById('status-dot').className = 'w-2 h-2 rounded-full bg-forest-500';
            document.getElementById('status-text').textContent = 'Calculated';
            document.getElementById('status-text').className = 'font-mono text-[10px] tracking-widest text-brand-forest uppercase';

            // Show Results
            emptyState.classList.add('hidden');
            resultsContainer.classList.remove('hidden');
            
            // Only show toast on explicit click, not auto-recalc
            if(event && event.type === 'click') {
                showNotification('Calculation Complete', 'Duration logic successfully processed.', 'success');
            }
        }

        function reset() {
            startDateInput.value = '';
            endDateInput.value = '';
            toggleInclude(false);
            
            resultsContainer.classList.add('hidden');
            emptyState.classList.remove('hidden');
            
            document.getElementById('status-dot').className = 'w-2 h-2 rounded-full bg-brass animate-pulse';
            document.getElementById('status-text').textContent = 'Ready';
            document.getElementById('status-text').className = 'font-mono text-[10px] tracking-widest text-brand-muted uppercase';
            
            showNotification('System Reset', 'Inputs have been cleared.', 'info');
        }

        // --- Notification System ---
        function showNotification(title, message, type = 'info') {
            const container = document.getElementById('notification-container');
            const notif = document.createElement('div');
            
            let accentColor, iconName, bgColor;
            if (type === 'error') {
                accentColor = 'text-rust';
                bgColor = 'bg-rust';
                iconName = 'alert-triangle';
            } else if (type === 'success') {
                accentColor = 'text-forest-500';
                bgColor = 'bg-forest-700';
                iconName = 'check-circle';
            } else {
                accentColor = 'text-slate';
                bgColor = 'bg-slate';
                iconName = 'info';
            }

            notif.className = 'bg-brand-base border border-brand-line industrial-shadow p-4 w-80 pointer-events-auto flex gap-3 toast-enter relative overflow-hidden';
            
            notif.innerHTML = `
                <div class="absolute left-0 top-0 bottom-0 w-1 ${bgColor}"></div>
                <div class="${accentColor} mt-0.5 ml-1 shrink-0">
                    <i data-lucide="${iconName}" width="16" height="16"></i>
                </div>
                <div class="flex-1">
                    <h4 class="font-mono text-[10px] tracking-[0.15em] ${accentColor} uppercase mb-1">${title}</h4>
                    <p class="text-sm text-brand-text leading-snug">${message}</p>
                </div>
                <button class="text-brand-muted hover:text-brand-text transition-colors shrink-0 self-start" onclick="this.parentElement.remove()">
                    <i data-lucide="x" width="14" height="14"></i>
                </button>
            `;

            container.appendChild(notif);
            lucide.createIcons({ root: notif });

            setTimeout(() => {
                if(notif.parentElement) {
                    notif.classList.remove('toast-enter');
                    notif.classList.add('toast-exit');
                    setTimeout(() => notif.remove(), 300);
                }
            }, 4000);
        }

        // --- Modal Logic ---
        const infoBtn = document.getElementById('info-btn');
        const infoModal = document.getElementById('info-modal');
        const closeInfoBtn = document.getElementById('close-info-btn');
        const infoBackdrop = document.getElementById('info-backdrop');

        const toggleInfo = (show) => {
            if(show) infoModal.classList.remove('hidden');
            else infoModal.classList.add('hidden');
        };

        infoBtn.addEventListener('click', () => toggleInfo(true));
        closeInfoBtn.addEventListener('click', () => toggleInfo(false));
        infoBackdrop.addEventListener('click', () => toggleInfo(false));

        // --- Event Listeners ---
        calculateBtn.addEventListener('click', calculateDuration);
        resetBtn.addEventListener('click', reset);
        
        btnExclude.addEventListener('click', () => toggleInclude(false));
        btnInclude.addEventListener('click', () => toggleInclude(true));

        lucide.createIcons();

    </script>
</body>
</html>
